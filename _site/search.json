[
  {
    "objectID": "stuff.html",
    "href": "stuff.html",
    "title": "Other stuff I do",
    "section": "",
    "text": "Order By\n       Default\n         \n          Title\n        \n     \n  \n    \n      \n      \n    \n\n\n\n\n\n\n\n\n\n\nTwitter\n\n\n\n\n\n\n\n\n\n\n\n\n\nPodcasts\n\n\n\n\n\n\n\nNo matching items"
  },
  {
    "objectID": "passesfeb.html",
    "href": "passesfeb.html",
    "title": "Passing",
    "section": "",
    "text": "Assists, xT and xA Eredivisie 2022/2023\nTable sorted on Assists and xA"
  },
  {
    "objectID": "posts/2021-02-04_Giakoumakis/index.html",
    "href": "posts/2021-02-04_Giakoumakis/index.html",
    "title": "Extraordinary Giakoumakis",
    "section": "",
    "text": "Giakoumakis stays with VVV for at least the rest of the season. He scored 21 goals (6 penalties) already this season. Is he really that good? Let’s find out if a bigger club should go after him this summer.  He had 15 non penalty goals. His shot map looks great. Very few shots from outside the penalty box and a lot of central shots. His NPxG is 8.46, which already shows his overperformance.\n\n\n\n\n Let’s take a closer look at the xG of his chances. I divided his chances in 0.1 xG bins. We see that most of his chances are really small (< 0.1 xG), but he scores relative many of those chances(4 from 36). The same goes for the 0.1-0.2 bin where he scored 4 from 12. What can we do with xPoints and do we need it?\n\n\n\n\n So, how extraordinary is this? I’ve simulated all his non penalty shots a million times to see how much he would score. As we can see, the chance that he scores 15 of them is only a few percent! Scoring only 3 goals is more likely than the 15 he has!\n\n\n\n\n If we look at the minimum number of goals scored in the simulations, we see that he has an almost 50% chance of scoring at least 9 goals. The chance at scoring 11 or more goals is less than 25%\n\n\n\n\nWill he continue this form the rest of the season? Possible, but unlikely. Will he manage this next season as well? Even more unlikely.\nVVV should’ve sold him already in my opinion as they are safe from relegation. Now they should certainly sell him at the end of the season."
  },
  {
    "objectID": "posts/2021-03-03_Expected-points/index.html",
    "href": "posts/2021-03-03_Expected-points/index.html",
    "title": "Expected Points",
    "section": "",
    "text": "This post is about Expected Points\nRead the Dutch version of this article here\nYou probably read already about it, or saw it in some tweet/picture/anything, Expected Points. From understat to Opta, they are all using it. There are some different ways to calculate it though. In this article I will tell you my method, the method we use for our dashboard at Tussen de Linies\n #### XPOINTS? What can we do with xPoints and do we need it?\nWe can use xPoints to see where we may expect a team in the league table. In short: it is a way to show how well they perform this season, looking at their shots.\nRaw xG numbers don’t say everything, as the quality of the chances plays a role as well.\n\nAN EXAMPLE\nLet’s take a look at the game FC Groningen against FC Twente. The game ended in 2-2 with xG 1.9 and 1.5. In the table you’ll see the chances for both teams to win.\n\n\n\nAs you can see, the xG of Groningen is 0.5 higher (almost 36%), but the chance to win is 86% percent higher. The size of the chances is what decides the difference.\n\n\nHOW BIG ARE THE CHANCES?\n\n\n\nBesides the two goals, Groningen has a lot of medium sized chances. Twente has three good chances, but not much else. For getting the chance to win and so the expected points, we will simulate those chances. \n\n\n\nTHE CALCULATION\nFor every shot we draw a random number between 0 and 1. Everytime this number is smaller than the xG of that shot, the shot becomes a goal. After we’ve done this for every shot in the match, we got a number of home- and away goals and so a result (home win/draw/away win). We simulate a match this way for ten thousand times. Each result is stored and after all the simulations we count the number of different results to determine the chance for both teams to win. It’s simple the perentage of simulations resulting in that specific result.\nAfter we have those chances, we multiply the chance to win with 3 and the chance for a draw with 1 for both teams. So: Groningen 49.04% * 3 punten + 24.72% * 1 punt = 1.72\nThose calculations will give us a number of points that we call Expected Points. Doing this for a whole season will give us an Expected Rank. In this match, Groningen didn’t got enough with there 1 real point, but over the whole season they got too many points.\n\n\n\nTHE PROBLEM(S)\nGame state is very much resposible for the way a team acts. If you’re leading by an early goal, the urge to attack fades away. The opponent will attack instead and will get a higher xG with every shot they take. If they don’t score, they keep attacking without scoring. So the xG skews in their favour, even if their chances are poor. Scoring 2 or 3 goals from less than 1 xG in the beginning of the game will also have this result, as the opponent must attack and have a comfortable lead.\nThe experience learns us that over a whole season, xPoints is good in giving us a fair picture about the teams in a competition.\n\n\nHOW DOES X PERFORM OVER TIME?\nIf you want to see a xPoints timeline of you’re favorite Eredivisie team, hit me up on Twitter!"
  },
  {
    "objectID": "dia.html#getting-up",
    "href": "dia.html#getting-up",
    "title": "Test",
    "section": "Getting up",
    "text": "Getting up\n\nTurn off alarm\nGet out of bed"
  },
  {
    "objectID": "dia.html#breakfast",
    "href": "dia.html#breakfast",
    "title": "Test",
    "section": "Breakfast",
    "text": "Breakfast\n\nEat eggs\nDrink coffee"
  },
  {
    "objectID": "dia.html#dinner",
    "href": "dia.html#dinner",
    "title": "Test",
    "section": "Dinner",
    "text": "Dinner\n\nEat spaghetti\nDrink wine"
  },
  {
    "objectID": "dia.html#going-to-sleep",
    "href": "dia.html#going-to-sleep",
    "title": "Test",
    "section": "Going to sleep",
    "text": "Going to sleep\n\nGet in bed\nCount sheep"
  },
  {
    "objectID": "passesKKD.html",
    "href": "passesKKD.html",
    "title": "Passing",
    "section": "",
    "text": "Assists, xT and xA Eerste Divisie 2023/2024\nTable sorted on Assists and xA"
  },
  {
    "objectID": "Work.html",
    "href": "Work.html",
    "title": "Work",
    "section": "",
    "text": "Order By\n       Default\n         \n          Title\n        \n     \n  \n    \n      \n      \n    \n\n\n\n\n\nNo matching items"
  },
  {
    "objectID": "Shots.html",
    "href": "Shots.html",
    "title": "Shooting",
    "section": "",
    "text": "Shots and xG Eredivisie 2023/2024\nTable sorted on NP-Goals and NPxG"
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Home",
    "section": "",
    "text": "Welcome!!\nMy name is Robin Koetsier. This site serves as a personal site for my data and blog posts.\nI mostly write/visualize stuff about Dutch football. On my Twitter profile you can follow me for visualizations of Eredivisie matches and other stuff. I will update the Eredivisie stats after every matchday. Below you can check all my posts combined. In the menu they are divided by what kind of post it is.\n\n\n\n  \n\n\n\n\n\n\n\n\n\n  \n\n\n\n\nxPoints\n\n\n\n\n\nCalculate the expected points yourself with the worldfootballR package\n\n\n\n\n\n\nOct 18, 2022\n\n\n\n\n\n\n  \n\n\n\n\nShots on target\n\n\n\n\n\nVisualize where teams shoot on goal!\n\n\n\n\n\n\nOct 10, 2022\n\n\n\n\n\n\n  \n\n\n\n\nPercentile Radars/Pizza’s\n\n\n\n\n\nMake Percentile Pizza charts like The Atletic, mplsoccer or Football Slices!\n\n\n\n\n\n\nApr 27, 2021\n\n\n\n\n\n\n  \n\n\n\n\nExpected Points\n\n\n\n\n\nHow do we calculate xPoints?\n\n\n\n\n\n\nMar 3, 2021\n\n\n\n\n\n\n  \n\n\n\n\nExtraordinary Giakoumakis\n\n\n\n\n\nHow good is Giakoumakis really?\n\n\n\n\n\n\nFeb 4, 2021\n\n\n\n\n\n\nNo matching items"
  },
  {
    "objectID": "stuff/twitter/index.html",
    "href": "stuff/twitter/index.html",
    "title": "Twitter",
    "section": "",
    "text": "Besides my personal Twitter profile, I also made a bot to post a dashboard every Eredivisie game. This was mostly to teach myself some more coding. You can see both accounts here."
  },
  {
    "objectID": "stuff/podcasts/index.html",
    "href": "stuff/podcasts/index.html",
    "title": "Podcasts",
    "section": "",
    "text": "All episodes:\n Spotify\n Apple Music\nBesides that, I was also in one episode of the ‘Showkeepers Podcast’ (also in Dutch)"
  },
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "About me",
    "section": "",
    "text": "I do most of my visualisations in R and sometimes in Python. I you have any questions or need some help with these languages, shoot me a message on Twitter.\nThe Eredivisie stats are made with event data. The xG model I made myself using XGBoost in R. My twitterbot @Eredivisieplots is running on a Raspberry Pi 3 and uses Python and R to get the data and make the dashboard.\nI also made a dashboard in Tableau a few season ago to visualize the birth places of player in the Eredivisie and the KKD.\nThose are my skills that are relevant skill for my site."
  },
  {
    "objectID": "shotsfeb.html",
    "href": "shotsfeb.html",
    "title": "Shooting",
    "section": "",
    "text": "Shots and xG Eredivisie 2022/2023\nTable sorted on NP-Goals and NPxG"
  },
  {
    "objectID": "d3/sim/index.html",
    "href": "d3/sim/index.html",
    "title": "RAW HTML CONTENT",
    "section": "",
    "text": "<!DOCTYPE html>\n<html>\n<head>\n  <title>D3.js - Bar Chart</title>\n  <script src=\"https://d3js.org/d3.v7.min.js\"></script>\n  <script src=\"https://code.jquery.com/jquery-3.6.0.min.js\"></script>\n  <link href=\"https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/css/select2.min.css\" rel=\"stylesheet\" />\n  <script src=\"https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/js/select2.min.js\"></script>\n  <style>\n    #dropdown {\n      width: 300px; /* Adjust the width as desired */\n    }\n  </style>\n</head>\n<body>\n  <h1>Bar Chart</h1>\n  <select id=\"dropdown\"></select>\n  <div id=\"chart\"></div>\n\n  <script>\n    // Helper function to load CSV data\n    function loadCSV(filename) {\n      return new Promise(function(resolve, reject) {\n        d3.csv(filename).then(function(data) {\n          resolve(data);\n        }).catch(function(error) {\n          reject(error);\n        });\n      });\n    }\n\n    d3.csv(\"names.csv\").then(function(data) {\n      var uniqueValues = Array.from(new Set(data.map(function(d) { return d['a']; })));\n\n      //uniqueValues = uniqueValues.slice(0, 10); // Limit to the first 10 unique values\n\n      // Create the select2 searchable drop-down\n      $(\"#dropdown\").select2({\n        data: uniqueValues\n      });\n\n      // Event listener for drop-down change\n      $(\"#dropdown\").on(\"change\", function() {\n        var selectedValue = $(this).val();\n\n        // Load CSV data based on selected value\n        loadCSV('Players/'+selectedValue + \".csv\").then(function(filteredData) {\n          // Clear previous chart\n          d3.select(\"#chart\").html(\"\");\n\n          // Define chart dimensions\nvar width = 700;\nvar height = 500;\n\n// Define margin\nvar margin = { top: 25, right: 20, bottom: 50, left: 200 };\n\n// Calculate the inner width and height of the chart\nvar innerWidth = width - margin.left - margin.right;\nvar innerHeight = height - margin.top - margin.bottom;\n\n// Create SVG element\nvar svg = d3.select(\"#chart\")\n  .append(\"svg\")\n  .attr(\"width\", \"100%\") // Set the SVG width to 100% of the container\n  .attr(\"height\", height)\n  .append(\"g\")\n  .attr(\"transform\", \"translate(\" + (width / 2) + \",\" + margin.top + \")\"); // Center the graph horizontally\n\n// Create x-scale\nvar xScale = d3.scaleLinear()\n  .domain([0, d3.max(filteredData, function(d) { return parseFloat(d.Similarity); })])\n  .range([0, innerWidth]);\n\n          // Create y-scale\nvar yScale = d3.scaleBand()\n  .domain(filteredData.map(function(d) { return d['Player 2']; }))\n  .range([0, innerHeight])\n  .padding(0.1);\n\n// Limit y-axis domain to only the values present in the filtered data\nyScale.domain(filteredData.map(function(d) { return d['Player 2']; }));\n\n// Display the data rows sorted by \"Similarity\" in descending order\nfilteredData.sort(function(a, b) {\n  return parseFloat(b.Similarity) - parseFloat(a.Similarity);\n});\n\n// Limit to the top 15 values\nfilteredData = filteredData.slice(0, 20);\n          // Create y-scale\nvar yScale = d3.scaleBand()\n  .domain(filteredData.map(function(d) { return d['Player 2']; }))\n  .range([0, height - 50])\n  .padding(0.1);\n\n// Limit y-axis domain to only the values present in the filtered data\nyScale.domain(filteredData.map(function(d) { return d['Player 2']; }));\n\n// Create x-scale\nvar xScale = d3.scaleLinear()\n  .domain([0, d3.max(filteredData, function(d) { return parseFloat(d.Similarity); })])\n  .range([0, innerWidth]);\n\n// Add chart title\nsvg.append(\"text\")\n  .attr(\"class\", \"chart-title\")\n  .attr(\"x\", innerWidth / 2)\n  .attr(\"y\", -margin.top / 2)\n  .attr(\"text-anchor\", \"middle\")\n  .text(\"Player similar to \" + selectedValue);\n\n// Create bars\nsvg.selectAll(\"rect\")\n  .data(filteredData)\n  .enter()\n  .append(\"rect\")\n  .attr(\"x\", 0) // Move the bars to the left edge of the chart\n  .attr(\"y\", function(d) { return yScale(d['Player 2']); })\n  .attr(\"width\", function(d) { return xScale(parseFloat(d.Similarity)); })\n  .attr(\"height\", yScale.bandwidth())\n  .attr(\"fill\", \"steelblue\");\n\n  \n\n// Create value labels\nsvg.selectAll(\".value-label\")\n  .data(filteredData)\n  .enter()\n  .append(\"text\")\n  .attr(\"class\", \"value-label\")\n  //.attr(\"x\", 40) // Position the labels in the center of each bar\n  .attr(\"y\", function(d) { return yScale(d['Player 2']) + yScale.bandwidth() / 2; }) // Position the labels vertically centered within each bar\n  .attr(\"dy\", \"0.35em\") // Adjust the vertical alignment of the labels\n  .text(function(d) { return parseFloat(d.Similarity).toFixed(2); }) // Display the rounded value of the bar with 2 decimal places\n  .attr(\"text-anchor\", \"right\") // Align the labels to the right\n  .attr(\"fill\", \"white\") // Set the text color to white for better visibility\n  .style(\"font-size\", \"12px\"); // Set the font size to 12 pixels\n\n// Mouseover event handler\nfunction handleMouseOver(d) {\n  d3.select(this)\n    .attr(\"fill\", \"orange\");\n}\n\n// Mouseout event handler\nfunction handleMouseOut(d) {\n  d3.select(this)\n    .attr(\"fill\", \"steelblue\");\n}\n\n// Create y-axis\nsvg.append(\"g\")\n  .call(d3.axisLeft(yScale))\n  .selectAll(\"text\")\n  .attr(\"dy\", \"0.55em\") // Adjust the vertical alignment of the labels\n  .attr(\"x\", -10) // Move the labels slightly to the left\n  .attr(\"text-anchor\", \"end\") // Align the labels to the end of the tick\n // .attr(\"transform\", \"rotate(-20)\"); // Rotate the labels for better readability\n\n\n          // Create x-axis\n          svg.append(\"g\")\n            .attr(\"transform\", \"translate(50, \" + (height - 50) + \")\")\n            .call(d3.axisBottom(xScale));\n\n          \n\n        }).catch(function(error) {\n          console.log(error);\n        });\n      });\n    });\n    \n  </script>\n</body>\n</html>"
  },
  {
    "objectID": "tutorials.html",
    "href": "tutorials.html",
    "title": "Tutorials",
    "section": "",
    "text": "Order By\n       Default\n         \n          Title\n        \n         \n          Date - Oldest\n        \n         \n          Date - Newest\n        \n     \n  \n    \n      \n      \n    \n\n\n\n\n\n\n\n\n\n\nxPoints\n\n\nCalculate the expected points yourself with the worldfootballR package\n\n\n\nOct 18, 2022\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nShots on target\n\n\nVisualize where teams shoot on goal!\n\n\n\nOct 10, 2022\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nPercentile Radars/Pizza’s\n\n\nMake Percentile Pizza charts like The Atletic, mplsoccer or Football Slices!\n\n\n\nApr 27, 2021\n\n\n\n\n\n\n\n\nNo matching items"
  },
  {
    "objectID": "rankfeb.html",
    "href": "rankfeb.html",
    "title": "xRank",
    "section": "",
    "text": "Expected Points Eredivisie 2022/2023\nLeague table sorted on xPoints\n\n\n\nBased on simulating every shot in every match\nLast update: \n2023-11-04"
  },
  {
    "objectID": "Schoten.html",
    "href": "Schoten.html",
    "title": "Getting Blue Fingers",
    "section": "",
    "text": "Shots and xG Eredivisie 2022/2023\nTable sorted on NP-Goals and NPxG\n\n\n\n\n\n\n\n\n Download table as xlsx"
  },
  {
    "objectID": "posts.html",
    "href": "posts.html",
    "title": "Posts",
    "section": "",
    "text": "Order By\n       Default\n         \n          Title\n        \n         \n          Date - Oldest\n        \n         \n          Date - Newest\n        \n     \n  \n    \n      \n      \n    \n\n\n\n\n\n\n\n\n\n\n\nHow do we calculate xPoints?\n\n\n\nMar 3, 2021\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nHow good is Giakoumakis really?\n\n\n\nFeb 4, 2021\n\n\n\n\n\n\n\n\nNo matching items"
  },
  {
    "objectID": "tutorials/2022-10-18_xpoints-table/index.html",
    "href": "tutorials/2022-10-18_xpoints-table/index.html",
    "title": "xPoints",
    "section": "",
    "text": "LOADING THE PACKAGES\nMake sure you have the newest version of worldfootballR.\n\n# devtools::install_github(\"JaseZiv/worldfootballR\")\nlibrary(tidyverse)\nlibrary(worldfootballR)\n\nGETTING THE MATCH DATA\nAs we are simulating every shot in every match multiple times, we need to load all the shots from the competition we want to use.\n\n#get match id's\nleague_matches <- fotmob_get_league_matches(\n  country =     \"ENG\",\n  league_name = \"Championship\"\n) \n\n#filter out matches in the future\nleague_matches <- league_matches %>%\n  filter(league_matches$status$reason$short == \"FT\") \n\n#get matches for those id's\nmatch_details <- fotmob_get_match_details(league_matches$id)\n\n\n# unnest the shots only needed in older versions of worldfootballR so commented it out) \n# and add team name of team shooting and team conceding (\nshots_temp <- match_details %>%\n  #unnest(shots) %>%\n  mutate(team_name = case_when(team_id == home_team_id ~ home_team,\n                              team_id == away_team_id ~ away_team),\n         opponent = case_when(team_id == home_team_id ~ away_team,\n                              team_id == away_team_id ~ home_team))\n\nIf you want all the leagues and their id’s/names/countries, read the csv from github\n\nleagues <- read.csv(\"https://raw.githubusercontent.com/JaseZiv/worldfootballR_data/master/raw-data/fotmob-leagues/all_leagues.csv\")\nhead(leagues)\n\n  ccode       country   id                 name\n1   INT International   42     Champions League\n2   INT International   73        Europa League\n3   INT International  525 AFC Champions League\n4   INT International 9469              AFC Cup\n5   INT International 9841              AFC U19\n6   INT International 9265       AFF Suzuki Cup\n                                    page_url\n1      /leagues/42/overview/champions-league\n2         /leagues/73/overview/europa-league\n3 /leagues/525/overview/afc-champions-league\n4             /leagues/9469/overview/afc-cup\n5             /leagues/9841/overview/afc-u19\n6      /leagues/9265/overview/aff-suzuki-cup\n\n\nView the data frame and search in it!\nTABLE WITH XG PER TEAM\nFirst we make a table with the xG for and against of every team. This is also possible through worldfootballR, but the function doesn’t work at the moment.\n\nFunction that currently doesn’t work\nere_team_xg_2022 <- fotmob_get_season_stats(\n  league_id = 48, #48 is the code for the Championship\n  season_name = \"2022/2023\",\n  stat_name = \"Expected goals\",\n  team_or_player = \"team\"\n)\n\nxG_table <- shots_temp %>%\n  mutate(expected_goals = replace_na(expected_goals,0)) %>% #replace the NA for own goals to 0\n  group_by(team_name) %>%\n  summarise(xGF = sum(expected_goals)) %>% #xG for\n  left_join(shots_temp %>% #join with xG against\n  mutate(expected_goals = replace_na(expected_goals,0)) %>%\n  group_by(opponent) %>%\n  summarise(xGA = sum(expected_goals)),by=c(\"team_name\" = \"opponent\"))\nhead(xG_table)\n\n# A tibble: 6 × 3\n  team_name          xGF   xGA\n  <chr>            <dbl> <dbl>\n1 Birmingham City   15.2  17.6\n2 Blackburn Rovers  14.4  18.2\n3 Blackpool         16.4  21.9\n4 Bristol City      18.6  21.8\n5 Burnley           17.5  14.0\n6 Cardiff City      13.7  13.9\n\n\nNice, so we have the xG of the teams. Note that you can also filter shots_temp to exclude penalties. I keep them in as I want to make a table with the complete xG and xPoints picture.\nNow for the hard part, calculating the xPoints per match. To calculate it, we will build a function to simulate every shot in the match. We do that ten thousand times and count the times every team wins/draws/loses. To get some more info, read the calculation in my old article about it.\nCALCULATE XPOINTS\nSo first we make the function to simulate all the shots. It is an old function of mine that contains other functions as well. The easiest is to copy all the functions and just paste them in a new rscript.\n\nthe functions\n\n# main function\ncalculateChance<-function(team1,team2,p){\n\n  home = 0\n  away = 0\n  draw = 0\n  homeP = 0\n  awayP = 0\n  drawP = 0\n  \n  for(i in 1:p){\n    matchWinner <- calculateWinner(team1,team2)\n    \n    if(matchWinner == \"home\"){\n      home <- home+1\n      homeP <- homeP+3\n    }else if(matchWinner == \"away\"){\n      \n      away <- away+1\n      awayP <- awayP+3\n    }else{\n      draw <- draw +1\n      awayP <- awayP+1\n      homeP <- homeP+1\n    }\n  }\n  \n  home = paste0(home/(p/100),\"%\")\n  away = paste0(away/(p/100),\"%\")\n  draw = paste0(draw/(p/100),\"%\")\n  homeP = homeP/p\n  awayP = awayP/p\n  \n  chances <- paste0(\"Home win: \",home,\"% | Draw: \",draw,\"% | Away win: \",away,\"%\")\n  game <- data.frame(home,draw,away,homeP,awayP)\n  return(game)\n}\n\n# function that returns if a shot becomes a goal and counts the goals\ntestShots<-function(XG){\n  Goals = 0\n  XG[is.na(XG)] <- 0\n  for(i in 1:length(XG)){\n    if(runif(1, 0.0, 1.0)<=XG[i]){\n      \n      Goals <- Goals + 1\n    }else{\n      \n    }\n  }\n  \n  return(Goals)\n}  \n\n# function that calculates the winner by comparing the number of goals of the two teams\ncalculateWinner <- function(home,away){\n  HomeGoals = 0\n  AwayGoals = 0\n  \n  HomeGoals <- testShots(home)\n  AwayGoals <- testShots(away)\n  \n  #diffTemp <- (HomeGoals - AwayGoals)\n  \n  #diff <- append(diff,diffTemp)\n  if(HomeGoals > AwayGoals){\n    \n    return(\"home\")\n  }else if(AwayGoals > HomeGoals){\n    \n    return(\"away\")\n  }else{\n    \n    return(\"draw\")\n  }\n}\n\nTo use this function on the data frame of all the shots we are going to wrap it in a function so we can use it easier. The 10000 is the times we simulate every match. You can put it higher, but you’ll have to wait longer for the results.\n\nplot_func <- function(df){\n  calculateChance(pull(df %>% filter(team_id == home_team_id),expected_goals),\n                                      pull(df %>% filter(team_id == away_team_id),expected_goals),\n                                      10000)\n}\n\nAnd than just use it.\n\ndf <- shots_temp %>%\n  group_by(match_id) %>%\n  nest() %>%\n  mutate(result = map(data, plot_func)) %>%\n  ungroup() %>%\n  unnest(result)\nhead(df)\n\n# A tibble: 6 × 7\n  match_id data               home   draw   away   homeP awayP\n     <int> <list>             <chr>  <chr>  <chr>  <dbl> <dbl>\n1  3915324 <tibble [18 × 43]> 3.07%  32.8%  64.13% 0.420 2.25 \n2  3915311 <tibble [13 × 43]> 23.4%  65.91% 10.69% 1.36  0.980\n3  3915310 <tibble [22 × 43]> 18.08% 29.35% 52.57% 0.836 1.87 \n4  3915302 <tibble [9 × 43]>  5.82%  68.97% 25.21% 0.864 1.45 \n5  3915309 <tibble [24 × 43]> 52.59% 28.04% 19.37% 1.86  0.862\n6  3915308 <tibble [26 × 43]> 55.47% 26.45% 18.08% 1.93  0.807\n\n\nLet’s join this with the data frame which contains the matches and teams\n\ntotal_df <- df %>%\n  select(match_id,homeP,awayP) %>%\n  left_join(match_details %>% \n              group_by(match_id,home_team,away_team) %>% \n              nest()) \n\nJoining, by = \"match_id\"\n\n# if you unnested the match_details earlier, you can just join by 'match_id'\n\n# and sum all the xPoints per team\nxpoints <- total_df %>%\n  group_by(home_team) %>%\n  summarise(pointsH = sum(homeP)) %>%\n  left_join(total_df %>%\n              group_by(away_team) %>%\n              summarise(pointsA = sum(awayP)),by =c(\"home_team\"=\"away_team\")) %>%\n  mutate(xPoints = pointsH + pointsA)\nhead(xpoints)\n\n# A tibble: 6 × 4\n  home_team        pointsH pointsA xPoints\n  <chr>              <dbl>   <dbl>   <dbl>\n1 Birmingham City     9.68    8.79    18.5\n2 Blackburn Rovers   10.7     7.55    18.3\n3 Blackpool           7.60    8.13    15.7\n4 Bristol City       10.6     7.73    18.3\n5 Burnley            11.7    10.2     21.9\n6 Cardiff City        9.83    7.83    17.7\n\n\nGET CURRENT LEAGUE TABLE\nTo make our own table complete, we need just one more data frame: the actual league table. I will show you the code of the function, but this one doesn’t work for me. If you use this function, be aware the every column name has the prefix ‘table_’ and that those do not appear in my code!\n\nworldfootballR FotMob function to get table\ntable <- fotmob_get_league_tables(\n  country =     \"ENG\",\n  league_name = \"Championship\"\n)\nI dove in the code to find the place where the table should be and found it, so you can copy the code beneath.\n\nsafely_from_json <- purrr::safely(jsonlite::fromJSON, otherwise = NULL, quiet = TRUE)\njsonn <- safely_from_json(\"https://www.fotmob.com/api/leagues?id=48\") \ntable <- data.frame(jsonn$result$table$data$table$all)\n\nNote the id=48 part at the end of the url. Change that to the desired competition code that you can find in the csv mentioned earlier.\nJOIN TABLES\nNow we “just” have to join these three data frames together. We select the id column as well, as it makes it easy to add the club logo.\n\nxptable <- table %>%\n  left_join(xpoints, by=c(\"name\" = \"home_team\")) %>%\n  separate(scoresStr, c(\"GF\", \"GA\"),\"-\") %>%\n  mutate(GF = as.numeric(GF),\n         GA = as.numeric(GA),\n         GD = GF - GA) %>%\n  \n  select(idx,id, name, played, wins,draws,losses,GF,GA,GD,pts,xPoints) %>%\n  arrange(-xPoints) %>%\n  mutate(xRank = c(1:length(table$name))) %>%\n  left_join(xG_table, by = c(\"name\" = \"team_name\")) %>%\n  mutate(xGD = xGF - xGA)\n\nLet’s arrange the table in the desired output.\n\nxptable <- xptable %>%\n  select(idx,id,name,played,wins,draws,losses,GF,GA,GD,pts,xGF,xGA,xGD,xPoints,xRank) %>%\n  `colnames<-`(c(\"RANK\",\"id\", \"TEAM\", \"P\",\"W\",\"D\",\"L\",\"GF\",\"GA\",\"GD\",\"PTS\",\"xGF\",\"xGA\",\"xGD\",\"xPTS\",\"xRANK\"))\n\nThe club logo’s can be found at the following url: https://images.fotmob.com/image_resources/logo/teamlogo/{id}.png. So we can change the column that has the id’s so that it will contain the url to the logo. This will make it super easy to add the logo to the table.\n\nxptable <- xptable %>%\n  mutate(id = glue::glue(\"https://images.fotmob.com/image_resources/logo/teamlogo/{id}.png\"))\n\nThe best way about this is that now the whole code is fool proof for every competition thtat FotMob has xG data for. Just change the name and competition code in a few functions and you’’ll get the table WITH the correct logo’s.\nMAKING THE TABLE\nI use reactable for the table on my site, as it is interactive. For this tutorial I’m using gt and gtExtras as those packages work great for static tables on websites. Just use the package you like the most. Here you can find the documentation on {gt} and a lot of other packages to make tables. Just pick the one you like the most. gt let’s you use HTML and I copied some code from the creator.\n\nlibrary(gt)\n\nadd_rank_color <- function(col1,col2){\n  add_color <- if (col1 < col2) {\n    \"background:#61B861;\"\n  } else if (col1>col2) {\n    \"background:#FC785F;\"\n  } else if (col1 == col2) {\n    \"background:#FDD297;\"\n  }\n  div_out <- htmltools::div(\n    style = paste(\n      \"width: 20px;\n  height: 20px;\n  border: 1px solid rgba(0, 0, 0, 0.03);\n  border-radius: 50%;\ntext-align: center;\n  align-item: right;\n   margin-left: 15px;\n#  color: #000;\n  font-size: 13px;\n      font-weight:bold;\",\n      add_color\n    ),col1\n  )\n  \n  as.character(div_out) %>% \n    gt::html()\n}\n\nAs I keep it simple/lazy, I just want to copy my xRank table but with a gt instead of reactable. The code is a bit messy as I normally keep my gt tables simpler.\nSo the above function colours the ‘RANK’ and ‘xRANK’ column according to which of the two is better/worse. This is so that I can use it in the code below that creates the table. The function has some css in there as well.\n\nlibrary(gtExtras)\nxptable %>%\n  mutate(\n    RANK_temp = RANK,\n    RANK = map2(RANK, xRANK, add_rank_color),\n    xRANK = map2(xRANK, RANK_temp, add_rank_color)\n  ) %>%\n  select(-RANK_temp) %>%\n  gt() %>%\n  gt_img_rows(columns = id, img_source = \"web\", height = 17) %>%\n  cols_label(\n    id = \" \"\n  ) %>%\n  fmt_number(\n    columns = c(xGF,xGA,xGD,xPTS),\n    decimals = 1\n  ) %>%\n  cols_align(\n    align = \"center\",\n    columns = c(P:xRANK)\n  ) %>%\n  tab_style(\n    style = list(\n      \n      cell_borders(\n        sides = \"left\",\n        color = \"black\",\n        weight = px(3)\n      )\n      \n    ),\n    locations = list(\n      cells_body(\n        columns = c(P,xGF)\n      )\n    )\n  ) %>%\n  tab_spanner(\n    label = \"LEAGUE TABLE\",\n    columns = c(\n      RANK:PTS\n    )\n  ) %>%\n  tab_spanner(\n    label = \"EXPECTED TABLE\",\n    columns = c(\n      xGF:xRANK\n    )\n  )  %>%\n  cols_width(\n    c(xGF:xPTS) ~ px(60),\n    #c(RANK,xRANK) ~ px(30),\n   TEAM ~ 150,\n    everything() ~ px(50)\n  ) %>% tab_style(\n    locations = cells_column_labels(columns = everything()),\n    style     = list(\n      cell_borders(sides = \"bottom\", weight = px(3)),\n      cell_text(weight = \"bold\")\n    )\n  ) %>% tab_style(\n    locations = list(\n      cells_body(\n        columns = c(PTS,xPTS)\n      )\n    ),\n    style = list(\n      cell_text(weight = \"bold\")\n    )\n  ) %>%\n  opt_table_font(font = \"Roboto Mono\") %>%\n  tab_options(\n    row.striping.background_color = \"#F6F8FA\",\n    row.striping.include_table_body = TRUE,\n    data_row.padding = px(2),\n    table.border.top.style = \"hidden\",\n    #table.border.bottom.style = \"hidden\",\n    table.font.size = \"12px\"\n  ) %>%\n  tab_header(md(\"**LEAGUE TABLE BASED ON EXPECTED POINTS**\")) %>%\n   tab_source_note(\n    source_note = \"xPoints calculated by simulating every shot in a match\"\n  )%>%\n   tab_source_note(\n    source_note = \"Data from Opta via FotMob\"\n  )\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nLEAGUE TABLE BASED ON EXPECTED POINTS\n    \n\n\n\n        LEAGUE TABLE\n      \n      \n        EXPECTED TABLE\n      \n    \n\nRANK\n       \n      TEAM\n      P\n      W\n      D\n      L\n      GF\n      GA\n      GD\n      PTS\n      xGF\n      xGA\n      xGD\n      xPTS\n      xRANK\n    \n\n\n\n3\n\nNorwich City\n14\n7\n3\n4\n21\n15\n6\n24\n20.4\n14.7\n5.7\n23.6\n1\n\n\n20\n\nWest Bromwich Albion\n14\n2\n8\n4\n19\n18\n1\n14\n19.8\n14.4\n5.4\n23.2\n2\n\n\n22\n\nMiddlesbrough\n14\n3\n4\n7\n15\n20\n-5\n13\n18.2\n13.2\n5.0\n23.0\n3\n\n\n2\n\nSheffield United\n14\n7\n4\n3\n24\n13\n11\n25\n21.4\n13.2\n8.1\n23.0\n4\n\n\n7\n\nLuton Town\n14\n5\n6\n3\n19\n14\n5\n21\n17.2\n12.4\n4.8\n22.6\n5\n\n\n1\n\nBurnley\n14\n6\n7\n1\n24\n12\n12\n25\n17.5\n14.0\n3.5\n21.9\n6\n\n\n10\n\nWatford\n14\n5\n5\n4\n19\n17\n2\n20\n17.1\n14.5\n2.6\n21.0\n7\n\n\n15\n\nWigan Athletic\n14\n5\n4\n5\n15\n18\n-3\n19\n16.7\n14.7\n2.0\n20.3\n8\n\n\n8\n\nSwansea City\n14\n6\n3\n5\n17\n20\n-3\n21\n17.0\n15.6\n1.4\n20.2\n9\n\n\n11\n\nMillwall\n14\n6\n2\n6\n17\n18\n-1\n20\n17.8\n17.2\n0.6\n19.9\n10\n\n\n6\n\nReading\n14\n7\n1\n6\n15\n20\n-5\n22\n15.2\n14.6\n0.6\n19.9\n11\n\n\n4\n\nQueens Park Rangers\n14\n7\n3\n4\n20\n16\n4\n24\n16.3\n15.8\n0.4\n19.5\n12\n\n\n9\n\nSunderland\n14\n5\n5\n4\n19\n14\n5\n20\n15.0\n15.3\n−0.3\n18.8\n13\n\n\n12\n\nBirmingham City\n14\n5\n4\n5\n14\n12\n2\n19\n15.2\n17.6\n−2.4\n18.5\n14\n\n\n17\n\nBristol City\n15\n5\n3\n7\n23\n24\n-1\n18\n18.6\n21.8\n−3.3\n18.3\n15\n\n\n5\n\nBlackburn Rovers\n15\n8\n0\n7\n18\n17\n1\n24\n14.4\n18.2\n−3.9\n18.3\n16\n\n\n14\n\nPreston North End\n15\n4\n7\n4\n8\n10\n-2\n19\n14.6\n17.2\n−2.5\n17.9\n17\n\n\n18\n\nCardiff City\n14\n5\n3\n6\n12\n14\n-2\n18\n13.7\n13.9\n−0.2\n17.7\n18\n\n\n13\n\nStoke City\n14\n5\n4\n5\n17\n17\n0\n19\n16.1\n19.0\n−2.9\n17.5\n19\n\n\n19\n\nBlackpool\n14\n4\n4\n6\n16\n20\n-4\n16\n16.4\n21.9\n−5.5\n15.7\n20\n\n\n16\n\nRotherham United\n13\n4\n6\n3\n15\n13\n2\n18\n14.1\n17.3\n−3.2\n15.4\n21\n\n\n24\n\nCoventry City\n11\n2\n4\n5\n9\n14\n-5\n10\n12.9\n14.8\n−1.9\n13.5\n22\n\n\n23\n\nHuddersfield Town\n13\n3\n2\n8\n16\n21\n-5\n11\n14.1\n19.4\n−5.3\n13.4\n23\n\n\n21\n\nHull City\n14\n4\n2\n8\n13\n28\n-15\n14\n13.8\n22.6\n−8.9\n12.5\n24\n\n\n\n\nxPoints calculated by simulating every shot in a match\n    \n\nData from Opta via FotMob\n    \n\n\n\n\n\nSOME NOTES\nAs FotMob only has the minute for every shot, it is impossible to take rebounds into account. So if a team has two consecutive shots the xG is just summed up instead of first being factored with each other. This will skew some results, but I think it’s a small error and every team will profit/be disadvantaged by it in the long run.\nAnother point is that gamestate will be a big factor in these calculations. If you’re playing to just score and sit back, the opponent will gather more xG in most cases till they score the equalizer. After that it’s probably fair game again, but the results are skewed a little. If the equalizer comes earlier, I think the current gamestate is just as fair but the xG and therefore xPoints are much lower."
  },
  {
    "objectID": "tutorials/RadarPizzaChart/index.html",
    "href": "tutorials/RadarPizzaChart/index.html",
    "title": "Percentile Radars/Pizza’s",
    "section": "",
    "text": "Getting and preparing the data\nlibrary(worldfootballR)  #for scraping\nlibrary(tidyverse)       #for ggplot, dplyr and several other stuff\nlibrary(forcats)         #for sorting within ggplot\nlibrary(glue)            #easier than paste()\nI’m using the ‘Spartan’ font in all my plots, but you can use your own ofcourse. The extrafont package has a lot of nice fonts.\nNext we are going to pick a player in which we are interested, as long as it’s from the leagues mentioned earlier. I’m choosing Mateusz Klich, but you can pick someone else, I’m not judging you. As mentioned before, worldfootballR has a function to scrape the scouting report.\nNote: the function was updated to scrape the WHOLE scouting report. So selecting your rows need some more thought. Besides that, it also have a column called ‘StatsGroup’ so you can use this to colour your chart. Besides that, FBref switched to OPTA, so the names of the stats will be different!\ndf <- fb_player_scouting_report(\"https://fbref.com/en/players/282679b4/Mateusz-Klich\")\nhead(df)\nFor some players you need to add\npos_versus = \"primary\"\ninside the function as the player played multiple positions, like this:\ndf <- fb_player_scouting_report(\"https://fbref.com/en/players/282679b4/Mateusz-Klich\", pos_versus = \"primary\")\n\n\nUsing other data\n\nYou can use The full scouting report as well. You only have to make the data frame yourself. A short example how to do this:\ndf_selected<- data.frame(player_name = \"Mateusz Klich\",\n                         Statistic = c(\"Pressures (Att 3rd)\", \n                                       \"% of dribblers tackled\",\n                                       \"Touches (Att 3rd)\",\n                                       \"Carries into Final Third\",\n                                       \"Progressive Passes Rec\",\n                                       \"Crosses\"),\n                         Per90 = c(4.63,\n                                    16,\n                                    26.11,\n                                    2.55,\n                                    7.22,\n                                    1.32),\n                         Percentile = c(92,\n                                        3,\n                                        94,\n                                        93,\n                                        98,\n                                        87),\n                         stat=c(\"Defending\",\n                                \"Defending\",\n                                \"Possession\",\n                                \"Possession\",\n                                \"Possession\",\n                                \"Attacking\"))\nYou can change the stat column to your liking, but you have to change the scale_fill_manuel() later on as well.\n\n\nNow we can use this column to color the chart. I’m not interested in every metric though. The ‘npxG+xA’ column for instance. I already have those metrics each in my chart. To pick the metrics you want/don’t want, print the Statistic column and choose.\n{::options parse_block_html=“true” /}\n\n\nSee all statistics\n\nprint(df$Statistic)\n    \n\n{::options parse_block_html=“false” /}\nIf you want to pick your metrics, use the statement below\ndf_selected <- df[c(2,3,9,10,13,28,29,47,73,107,109,116,118,126,148),]\nTo colour them by type of the Statistic, we make a new column and fill it with “Attacking”, “Possession” or “Defending”. You can use the StatGroup column that is already provided as well, but this tutorial was made before you could scrape the whole scouting report. This is also the reason the Statistics look random. Just change it to match your data frame.\ndf_selected <- df_selected %>% \n      mutate(stat=case_when(Statistic == \"Non-Penalty Goals\"|\n                            Statistic == \"npxG\"|\n                            Statistic == \"Shots Total\"|\n                            Statistic == \"Assists\"|\n                            Statistic == \"xA\"|\n                            Statistic == \"npxG+xA\"|\n                            Statistic == \"Shot-Creating Actions\" ~ \"Attacking\",\n                            Statistic == \"Passes Attempted\"|\n                            Statistic == \"Pass Completion %\"|\n                            Statistic == \"Progressive Passes\"|\n                            Statistic == \"Progressive Carries\"|\n                            Statistic == \"Dribbles Completed\"|\n                            Statistic == \"Touches (Att Pen)\"|\n                            Statistic == \"Progressive Passes Rec\" ~ \"Possession\",\n                                 TRUE ~ \"Defending\"))\n\n\nMaking the chart\nTo make the pizza chart, we will use geom_bar() with coord_polar(). It’s a neat little trick as there isn’t a good package to do it otherwise.\nggplot(df_selected,aes(fct_reorder(Statistic,stat),Percentile)) +                       #select the columns to plot and sort it so the types of metric are grouped\n  geom_bar(aes(y=100,fill=stat),stat=\"identity\",width=1,colour=\"white\",                 #make the whole pizza first\n  alpha=0.5) +                                                                          #change alphe to make it more or less visible\n  geom_bar(stat=\"identity\",width=1,aes(fill=stat),colour=\"white\") +                     #insert the values \n  coord_polar() +                                                                       #make it round\n  geom_label(aes(label=Per90,fill=stat),size=2,color=\"white\",show.legend = FALSE)+     #add a label for the value. Change 'label=Per.90' to 'label=Percentile' to show the percentiles\n scale_fill_manual(values=c(\"Possession\" = \"#D70232\",                                   #choose colors to fill the pizza parts\n                             \"Attacking\" = \"#1A78CF\",\n                             \"Defending\" = \"#FF9300\")) +                                                              \n  scale_y_continuous(limits = c(-10,100))+                                              #create the white part in the middle.   \n  labs(fill=\"\",                                                                         #remove legend title\n       caption = \"Data from StatsBomb via FBref\",                                       #credit FBref/StatsBomb\n       title=df_selected$Player[1])+                                                    #let the title be te name of the player\n \n  theme_minimal() +                                                                     #from here it's only themeing. \n  theme(legend.position = \"top\",\n        axis.title.y = element_blank(),\n        axis.title.x = element_blank(),\n        axis.text.y = element_blank(),\n        text = element_text(family=\"Spartan-Light\"),                                    #I downloaded this font from Google Fonts. You can use your own font of course\n        plot.title = element_text(hjust=0.5),\n        plot.caption = element_text(hjust=0.5,size=6),\n        panel.grid.major = element_blank(), \n        panel.grid.minor = element_blank()) \n\n  \n\nDoesn’t look half bad, but the labels are horrible. Besides that we should add some extra information about the player. The labels need to be rotated so they look better. We can do this by hand, but if we change the number of metrics we’re using we need to do it all over again. So let’s just make a calculation that we can run everytime we make a new chart. I chose to display the ‘Per 90’ stats insteadd of the percentiles. You can change this in geom_label().\ntemp <- (360/(nrow(df_selected))/2)                             #find the difference in angle between to labels and divide by two.\nmyAng <- seq(-temp, -360+temp, length.out = nrow(df_selected))  #get the angle for every label\nang<-ifelse(myAng < -90, myAng+180, myAng)                                    #rotate label by 180 in some places for readability\nang<-ifelse(ang < -90, ang+180, ang)                                          #rotate some lables back for readability...\nBecause some labels are rather long (‘Progressive Passes Rec’ for instance) I decided to let every word start on a new line. I used gsub for that\ndf_selected$Statistic <- gsub(\" \",\"\\n\",df_selected$Statistic)\nIf we plot again and add an extra line we will get a better plot.\nggplot(df_selected,aes(fct_reorder(Statistic,stat),Percentile)) +                       #select the columns to plot and sort it so the types of metric are grouped\n  geom_bar(aes(y=100,fill=stat),stat=\"identity\",width=1,colour=\"white\",                 #make the whole pizza first\n  alpha=0.5) +                                                                          #change alphe to make it more or less visible\n  geom_bar(stat=\"identity\",width=1,aes(fill=stat),colour=\"white\") +                     #insert the values \n  coord_polar() +                                                                       #make it round\n  geom_label(aes(label=Per90,fill=stat),size=2,color=\"white\",show.legend = FALSE)+     #add a label for the value. Change 'label=Per.90' to 'label=Percentile' to show the percentiles\n scale_fill_manual(values=c(\"Possession\" = \"#D70232\",                                   #choose colors to fill the pizza parts\n                             \"Attacking\" = \"#1A78CF\",\n                             \"Defending\" = \"#FF9300\")) +                                                              \n  scale_y_continuous(limits = c(-10,100))+                                              #create the white part in the middle.   \n  labs(fill=\"\",                                                                         #remove legend title\n       caption = \"Data from StatsBomb via FBref\",                                       #credit FBref/StatsBomb\n       title=df_selected$Player[1])+                                                    #let the title be te name of the player\n \n  theme_minimal() +                                                                     #from here it's only themeing. \n  theme(legend.position = \"top\",\n        axis.title.y = element_blank(),\n        axis.title.x = element_blank(),\n        axis.text.y = element_blank(),\n        axis.text.x = element_text(size = 6, angle = ang),\n        text = element_text(family=\"Spartan-Light\"),                                    #I downloaded this font from Google Fonts. You can use your own font of course\n        plot.title = element_text(hjust=0.5),\n        plot.caption = element_text(hjust=0.5,size=6),\n        panel.grid.major = element_blank(), \n        panel.grid.minor = element_blank()) \n\n  \n\nThat looks much better! From here you can change everything you want. I’m going to add a subtitle, and make some theme adjustments. Adding a picture is something I will add to this tutorial in the future.\n\n  \n\n{::options parse_block_html=“true” /}\n\n\nLet’s see de final code!\n\nggplot(df_selected,aes(fct_reorder(Statistic,stat),Percentile)) +                       #select the columns to plot and sort it so the types of metric are grouped\n  geom_bar(aes(y=100,fill=stat),stat=\"identity\",width=1,colour=\"white\",                 #make the whole pizza first\n  alpha=0.5) +                                                                          #change alphe to make it more or less visible\n  geom_bar(stat=\"identity\",width=1,aes(fill=stat),colour=\"white\") +                     #insert the values \n  coord_polar() +                                                                       #make it round\n  geom_label(aes(label=Per90,fill=stat),size=2,color=\"white\",show.legend = FALSE)+      #add a label for the value. Change 'label=Per.90' to 'label=Percentile' to show the percentiles\n scale_fill_manual(values=c(\"Possession\" = \"#D70232\",                                   #choose colors to fill the pizza parts\n                             \"Attacking\" = \"#1A78CF\",\n                             \"Defending\" = \"#FF9300\")) +                                                              \n  scale_y_continuous(limits = c(-10,100))+                                              #create the white part in the middle.   \n  labs(fill=\"\",   \n       caption = \"Data from StatsBomb via FBref\",     \n       #remove legend title\n       title=glue(\"{df_selected$Player[1]} | Leeds United\"),\n        subtitle = glue::glue(\"{df_selected$season} | Compared to midfielders Top 5 competitions | stats per 90\"))+ #let the title be te name of the player                                                \n \n  theme_minimal() +                                                                     #from here it's only themeing. \n  theme(plot.background = element_rect(fill = \"#F2F4F5\",color = \"#F2F4F5\"),\n        panel.background = element_rect(fill = \"#F2F4F5\",color = \"#F2F4F5\"),\n        legend.position = \"top\",\n        axis.title.y = element_blank(),\n        axis.title.x = element_blank(),\n        axis.text.y = element_blank(),\n         axis.text.x = element_text(size = 6, angle = ang),\n        text = element_text(family=\"Spartan-Light\"),                                    #I downloaded this font from Google Fonts. You can use your own font of course\n        plot.title = element_markdown(hjust=0.5,family=\"Spartan-Medium\"),\n        plot.subtitle = element_text(hjust=0.5,size=8),\n        plot.caption = element_text(hjust=0.5,size=6),\n        panel.grid.major = element_blank(), \n        panel.grid.minor = element_blank(),\n        plot.margin = margin(5,2,2,2)) \nNot too hard to do, right?\n\n\n{::options parse_block_html=“false” /}\nNote: with coord_polar() in combination with a background colour, I need to trim the image afterwards. I do this with a commandline (on mac OSX) statement in my R session:\nsystem(\"convert -trim image.png new_image.png\")\nWhere image.png is my just saved image and new_image.png will be the trimmed one. There is also an option to add the color to ggsave:\nggsave(\"image.png\",bg=\"#F2F4F5\")\nYou can add the resolution to ggsave() if the quality is poor.\nI prefer to trim it, as it removes unnecessary parts from the plot.\n\n\nSome other (well known) styles\nSome examples, with some well known styles included. Just a head start to create your own style and learn about how the different elements of ggplot work. Play around with colours/fonts/grid lines etc. to create something unique!\n\nThe Athletic/ Tom Worville\n\n  \n\n\n\nThe code\n\nggplot(df_selected,aes(fct_reorder(Statistic,stat),Percentile)) +                       \n  geom_bar(aes(y=100),fill=\"#131313\",stat=\"identity\",width=1,colour=\"#797979\",                 \n  alpha=0.5,show.legend = FALSE) +      \n  \n  \n  geom_bar(stat=\"identity\",width=1,aes(fill=stat),colour=\"#F3FEFC\",alpha=1) +                     \n  coord_polar(clip = \"off\") +                                                                      \n     geom_hline(yintercept=25, colour=\"#565656\",linetype=\"longdash\",alpha=0.5)+\n  geom_hline(yintercept=50, colour=\"#565656\",linetype=\"longdash\",alpha=0.5)+\n  geom_hline(yintercept=75, colour=\"#565656\",linetype=\"longdash\",alpha=0.5)+ \n scale_fill_manual(values=c(\"Possession\" = \"#1ADA89\",                                   \n                             \"Attacking\" = \"#0F70BF\",\n                             \"Defending\" = \"#EC313A\")) +                                                        \n   geom_label(aes(label=Percentile,fill=stat),size=2,color=\"white\",show.legend = FALSE)+ \n  scale_y_continuous(limits = c(-20,100))+                                              \n  labs(fill=\"\",   \n       caption = \"Data from StatsBomb via FBref\\nStyle copied from The Athletic/@worville\",     \n       #remove legend title\n       title=glue(\"{df_selected$Player[1]} | Leeds United\"),\n        subtitle = glue::glue(\"{df_selected$season} | Compared to midfielders Top 5 competitions | stats per 90\"))+                                                \n  theme_minimal() +                                                                     \n  theme(plot.background = element_rect(fill = \"#131313\",color = \"#131313\"),\n        panel.background = element_rect(fill = \"#131313\",color = \"#131313\"),\n        legend.position = \"bottom\",\n        axis.title.y = element_blank(),\n        axis.title.x = element_blank(),\n        axis.text.y = element_blank(),\n        axis.text.x = element_text(size = 6,colour = \"#FFFFFF\"),\n        text = element_text(family=\"Spartan-Light\",colour= \"#FEFEFE\"),                                   \n        plot.title = element_markdown(hjust=0.5,family=\"Spartan-Medium\"),\n        plot.subtitle = element_text(hjust=0.5,size=8),\n        plot.caption = element_text(hjust=0.5,size=6),\n        panel.grid.major = element_blank(), \n        panel.grid.minor = element_blank(),\n        plot.margin = margin(5,4,2,4)) \n\n\n\n\nFootball Slices\n\n  \n\n{::options parse_block_html=“true” /}\n\n\nThe code\n\nggplot(df_selected,aes(fct_reorder(Statistic,stat),Percentile)) +                      \n  geom_bar(aes(y=100),fill=\"#FAFBFD\",stat=\"identity\",width=1,colour=\"black\",                 \n  alpha=0.5) +                                                                          \n  geom_bar(stat=\"identity\",width=0.95,aes(fill=stat),colour=NA) +                    \n  coord_polar(clip = \"off\") +                                                                       \n \n   geom_hline(yintercept=25, colour=\"#CFD0D2\",alpha=1,size=0.1)+\n  geom_hline(yintercept=50, colour=\"#CFD0D2\",alpha=1,size=0.1)+\n  geom_hline(yintercept=75, colour=\"#CFD0D2\",alpha=1,size=0.1)+ \n   geom_text(aes(label=Per90,fill=stat),size=2,color=\"black\",show.legend = FALSE)+  \n scale_fill_manual(values=c(\"Possession\" = \"#F47294\",                                   \n                             \"Attacking\" = \"#E7D96E\",\n                             \"Defending\" = \"#8FBFEF\")) +                                                              \n  scale_y_continuous(limits = c(-10,110))+                                             \n  labs(fill=\"\",   \n       caption = \"Data from StatsBomb via FBref\\nStyle copied from @FootballSlices\",     \n       #remove legend title\n       title=glue(\"{df_selected$Player[1]} | Leeds United\"),\n        subtitle = glue::glue(\"{df_selected$season} | Compared to midfielders Top 5 competitions | stats per 90\"))+                                               \n  theme_minimal() +                                                                  \n  theme(plot.background = element_rect(fill = \"#FAFBFD\",color = \"#FAFBFD\"),\n        panel.background = element_rect(fill = \"#FAFBFD\",color = \"#FAFBFD\"),\n        legend.position = \"top\",\n        axis.title.y = element_blank(),\n        axis.title.x = element_blank(),\n        axis.text.y = element_blank(),\n         axis.text.x = element_text(size = 6),\n        text = element_text(family=\"Spartan-Light\"),                                    \n        plot.title = element_markdown(hjust=0.5,family=\"Spartan-Medium\"),\n        plot.subtitle = element_text(hjust=0.5,size=8),\n        plot.caption = element_text(hjust=0.5,size=6),\n        panel.grid.major = element_blank(), \n        panel.grid.minor = element_blank(),\n        plot.margin = margin(5,2,2,2)) \n\n\n{::options parse_block_html=“false” /}\n\n\nOne with no background\n\n  \n\n{::options parse_block_html=“true” /}\n\n\nThe code\n\nggplot(df_selected,aes(fct_reorder(Statistic,stat),Percentile)) +                      \n  geom_bar(aes(y=100),fill=\"#F2F4F5\",stat=\"identity\",width=1,colour=\"white\",                \n           alpha=1,linetype=\"dashed\") +                                                                          \n  geom_bar(stat=\"identity\",width=1,fill=\"#D20222\",colour=\"white\") +   \n  geom_hline(yintercept=25, colour=\"white\",linetype=\"longdash\",alpha=0.5)+\n  geom_hline(yintercept=50, colour=\"white\",linetype=\"longdash\",alpha=0.5)+\n  geom_hline(yintercept=75, colour=\"white\",linetype=\"longdash\",alpha=0.5)+ \n  geom_hline(yintercept=100, colour=\"white\",alpha=0.5)+ \n  coord_polar() +                                                                     \n  geom_label(aes(label=Per90),fill=\"#D20222\",size=2,color=\"white\",show.legend = FALSE)+     \n  scale_fill_manual(values=c(\"Possession\" = \"#D70232\",                                  \n                             \"Attacking\" = \"#1A78CF\",\n                             \"Defending\" = \"#FF9300\")) +                                                              \n  scale_y_continuous(limits = c(-10,100))+                                              \n  labs(fill=\"\",   \n       caption = \"Data from StatsBomb via FBref\",     \n       #remove legend title\n       title=glue(\"{df_selected$Player[1]} | Manchester United\"),\n       subtitle = glue::glue(\"{df_selected$season} | Compared to midfielders Top 5 competitions | stats per 90\"))+                                               \n  \n  theme_minimal() +                                                                     \n  theme(plot.background = element_rect(fill = \"#F2F4F5\",color = \"#F2F4F5\"),\n        panel.background = element_rect(fill = \"#F2F4F5\",color = \"#F2F4F5\"),\n        legend.position = \"top\",\n        axis.title.y = element_blank(),\n        axis.title.x = element_blank(),\n        axis.text.y = element_blank(),\n        axis.text.x = element_text(size = 6, angle = ang),\n        text = element_text(family=\"Spartan-Light\"),                                    \n        plot.title = element_markdown(hjust=0.5,family=\"Spartan-Medium\"),\n        plot.subtitle = element_text(hjust=0.5,size=8),\n        plot.caption = element_text(hjust=0.5,size=6),\n        panel.grid.major = element_blank(), \n        panel.grid.minor = element_blank(),\n        plot.margin = margin(5,2,2,2)) \n\n\n{::options parse_block_html=“false” /}\n\n\nOne with other labels and background colour\n\n  \n\n{::options parse_block_html=“true” /}\n\n\nThe code\n\nlabel_data <- df_selected\n\n# calculate the ANGLE of the labels\nnumber_of_bar <- nrow(label_data)\nlabel_data$id <- seq(1,length(label_data$player_name))\nangle <-  90 - 360 * (label_data$id-0.5) /number_of_bar     # I substract 0.5 because the letter must have the angle of the center of the bars. Not extreme right(1) or extreme left (0)\n\n# calculate the alignment of labels: right or left\n# If I am on the left part of the plot, my labels have currently an angle < -90\nlabel_data$hjust<-ifelse( angle < -90, 1, 0)\n\n# flip angle BY to make them readable\nlabel_data$angle<-ifelse(angle < -90, angle+180, angle)\n\n\n\nggplot(df_selected,aes(fct_reorder(Statistic,stat),Percentile)) +                      \n  geom_bar(aes(y=100),fill=\"#0066B2\",stat=\"identity\",width=1,colour=\"#0066B2\",                \n           alpha=0.4,linetype=\"dashed\") +                                                                          \n  geom_bar(stat=\"identity\",width=1,fill=\"#CC0033\",colour=\"white\") +   \n  geom_hline(yintercept=25, colour=\"white\",linetype=\"longdash\",alpha=0.5)+\n  geom_hline(yintercept=50, colour=\"white\",linetype=\"longdash\",alpha=0.5)+\n  geom_hline(yintercept=75, colour=\"white\",linetype=\"longdash\",alpha=0.5)+ \n  geom_hline(yintercept=100, colour=\"white\",alpha=0.5)+ \n  coord_polar() +                                                                     \n  geom_label(aes(label=Per90),fill=\"#CC0033\",size=2,color=\"white\",show.legend = FALSE,family=\"Spartan-Bold\")+     \n  scale_fill_manual(values=c(\"Possession\" = \"#D70232\",                                  \n                             \"Attacking\" = \"#1A78CF\",\n                             \"Defending\" = \"#FF9300\")) +                                                              \n  scale_y_continuous(limits = c(-10,110))+                                              \n  labs(fill=\"\",   \n       caption = \"Data from StatsBomb via FBref\",     \n       #remove legend title\n       title=glue(\"{df_selected$Player[1]} | Bayern Munich\"),\n       subtitle = glue::glue(\"{df_selected$season} | Compared to attackers Top 5 competitions | stats per 90\"))+                                               \n  geom_text(data=label_data, aes(x=id, y=100+10, label=Statistic, hjust=hjust), \n      color=\"#0066B2\", fontface=\"bold\",alpha=0.6, size=2.5, angle= label_data$angle, inherit.aes = FALSE )  +\n  theme_minimal() +                                                                     \n  theme(plot.background = element_rect(fill = \"#F2F4F5\",color = \"#F2F4F5\"),\n        panel.background = element_rect(fill = \"#F2F4F5\",color = \"#F2F4F5\"),\n        legend.position = \"top\",\n        axis.title.y = element_blank(),\n        axis.title.x = element_blank(),\n        axis.text.y = element_blank(),\n       # axis.text.x = element_text(size = 6, angle = ang),\n        axis.text.x = element_blank(),\n        text = element_text(family=\"Spartan-Light\"),                                    \n        plot.title = element_markdown(hjust=0.5,family=\"Spartan-Medium\"),\n        plot.subtitle = element_text(hjust=0.5,size=8),\n        plot.caption = element_text(hjust=0.5,size=6),\n        panel.grid.major = element_blank(), \n        panel.grid.minor = element_blank(),\n        plot.margin = margin(5,2,2,2)) \n\n\n{::options parse_block_html=“false” /}\nIf you have any questions, contact me on Twitter. and please tag me if you make a chart yourself! Love to see what people make of it."
  },
  {
    "objectID": "tutorials/2022-10-10_shot-areas/index.html",
    "href": "tutorials/2022-10-10_shot-areas/index.html",
    "title": "Shots on target",
    "section": "",
    "text": "PREPARE ENVIRONMENT\nOf course you need the packages. For packages of which I use more than one function, I like to load them. For other uses, just using package::function() is good enough. You will see me use it later on.\nlibrary(worldfootballR) \nlibrary(tidyverse)\n\n\nGET AND PREPARE DATA\nWe want the match data from FotMob for all the Eredivisie matches played this season. To know which matches to scrape, we can use the following code.\nleague_matches <- fotmob_get_league_matches(\n  country =     \"NED\",\n  league_name = \"Eredivisie\"\n) %>%\nfilter(league_matches$status$reason$short == \"FT\") # only select the matches that are already played.\nNow we can feed the match id’s from this data frame to the next function. It will collect all the data from these matches, so it can take some time.\nmatch_details <- fotmob_get_match_details(league_matches$id)\nIn this data frame, there is a column called ‘shots’. This has all the shots from that match in it with all the relevant data. To make live easier, you can unnest that column so you have a bigger data frame with every shot in there.\nshots_temp <- match_details %>%\n  unnest(shots)\nIn the next step we are going to filter the data so we only have the shots on target that are not blocked. I do this by looking at the ‘expected_goals_on_target’ column. In the same pipe we are adding the name of the team that takes the shot. I recommend this way over an ifelse() statement as it is easier to add more conditions in the future. If you want, you can filter the data so it only has shots from open play or just no penalties.\nshots_df <- shots_temp %>%\n  mutate(expected_goals_on_target = replace_na(expected_goals_on_target,0)) %>%\n  filter(expected_goals_on_target>0) %>%\n  mutate(team_name = \n                  case_when(\n                          away_team_id == team_id ~ away_team,\n                          TRUE ~ home_team\n                  ))\n\n\nPLOTTING\nNow we can start to plot. From past visualizations I made, I know the coordinates of the goal. The bottom left corner is (0,0) and the top right corner is (2,0.6367725). I decided to make 12 areas, so we have to devide those numbers bij 4 and 3. Let’s plot the whole league first to get a feeling for how it will look.\nshots_df %>%\n  ggplot(aes(on_goal_shot$x,on_goal_shot$y))+\n  stat_bin_2d(aes(on_goal_shot$x,on_goal_shot$y,fill=..count..),\n              binwidth = c(0.5, (0.6367725/3)),                     \n              drop=FALSE) \n\nLooks horrible, but the idea is clear. The most shots go to the area on the bottom, just right of the middle. To sort this by team, we can use a simple facet_wrap as you can see below.\nshots_df %>%\n  ggplot(aes(on_goal_shot$x,on_goal_shot$y))+\n  stat_bin_2d(aes(on_goal_shot$x,on_goal_shot$y,fill=..count..),\n              binwidth = c(0.5, (0.6367725/3)),\n              drop=FALSE)+\n  facet_wrap(~team_name)\n\nNow we’re getting somewhere! I really prefer to see how the areas correspond with each other per team though. So I’m going to add some code to print the percentage of shots in each area per team. This prints a text with the percentage in every area and the ..PANEL.. parts make sure it is the percentage per team and not per competition.\nshots_df %>%\n  ggplot(aes(on_goal_shot$x,on_goal_shot$y))+\n  stat_bin_2d(aes(on_goal_shot$x,on_goal_shot$y,fill=..count..),\n              binwidth = c(0.5, (0.6367725/3)),\n              drop=FALSE)+\n  stat_bin_2d(geom = \"text\", \n  aes(\n    label=paste0((100*(round((..count..)/tapply(..count..,..PANEL..,sum)[..PANEL..],2))),\"%\")),\n  binwidth = c(0.5, (0.6367725/3)))+\n  facet_wrap(~team_name)\n\nWhen saved in the right ratio, it already looks okay(ish).\nThe next step is to make is look way better than it does.\n\n\nTHEMING THE PLOT\nThe things we want to do:\n\nDraw a goal\nchange font\nremove legend\nremove axis ticks/names/numbers\nmake it pretty\n\nshots_df %>%\n  ggplot(aes(on_goal_shot$x,on_goal_shot$y))+\n  stat_bin_2d(aes(on_goal_shot$x,on_goal_shot$y,fill=..count..),\n              binwidth = c(0.5, (0.6367725/3)),\n              drop=FALSE)+\n  stat_bin_2d(geom = \"text\", size=3,colour=\"white\",\n              aes(\n                label=paste0((100*(round((..count..)/tapply(..count..,..PANEL..,sum)[..PANEL..],2))),\"%\")\n                \n              ), \n              \n              binwidth = c(0.5, (0.6367725/3)))+\n  #facet_wrap(~team_name)+\n  geom_segment(aes(x=0,xend=0,y=0,yend=0.66534392-0.028571429),colour=\"white\")+ #drawing a goal\n  geom_segment(aes(x=0-0.028571429,xend=0-0.028571429,y=0,yend=0.66534392),colour=\"white\")+ \n  geom_segment(aes(x=2,xend=2,y=0,yend=0.66534392-0.028571429),colour=\"white\")+\n  geom_segment(aes(x=2+0.028571429,xend=2+0.028571429,y=0,yend=0.66534392 ),colour=\"white\")+\n  geom_segment(aes(x=0,xend=2,y=0.66534392-0.028571429,yend=0.66534392-0.028571429),colour=\"white\")+\n  geom_segment(aes(x=0-0.028571429,xend=2+0.028571429,y=0.66534392,yend=0.66534392),colour=\"white\")+\n  scale_fill_gradient(low = \"#120E41\", high = \"#E172A8\")+ \n  labs(title= \"Where do the Eredivisie teams shoot on goal?\",\n       subtitle = \"Percentage of shots per area\",\n       caption = \"Data: Opta via FotMob\\n@RobinWilhelmus\")+\n  theme(plot.background = element_rect(fill = \"#120E41\", colour = \"#120E41\"),\n        panel.background = element_rect(fill = \"#120E41\", colour = \"#120E41\"),\n        legend.position = \"none\",\n        panel.grid = element_blank(),\n        axis.ticks = element_blank(),\n        axis.text = element_blank(),\n        axis.title = element_blank(),\n        strip.background = element_rect(fill=\"#69C5D2\"),\n        strip.text = element_text(family = \"Spartan-Medium\", color= \"#120E41\"),\n        plot.title = element_text(family = \"Spartan-Bold\", colour=\"#69C5D2\",size=18),\n        plot.subtitle = element_text(family = \"Spartan-Bold\", colour=\"#69C5D2\",size=14),\n        plot.caption = element_text(family = \"Spartan-Light\", colour=\"#69C5D2\",size=10))\n  \n\nWell, this looks nice. At first I was really happy with this plot, but it bothers me that the 18% in PSV’s plot is more highlighted than the 21% for NEC Nijmegen. This is because the colours are the absolute values and the labels are per club. I looked for a way to change this and still using facet_wrap() but couldn’t find a way. I do however found another way. It’s a bit harder, but I will guide you through it.\n\n\nA BETTER WAY\nTo make the plot the way I decribe above, we need to use {patchwork}. To make it easy for ourselves. We will first create a function of the above plot. We change some things, because the function will output 18 different plots. One for each club. So we need to set the title for each club. Let’s take a look. The reason I do it this way is to avoid an if-loop. You can totally do it that way, but I learned to avoid them if possible.\nplot_func <- function(df, name) {\ndf %>%\n    \n    ggplot(aes(on_goal_shot$x,on_goal_shot$y))+\n    stat_bin_2d(aes(on_goal_shot$x,on_goal_shot$y,fill=..count..),\n                binwidth = c(0.5, (0.6367725/3)), colour=\"white\",linetype=\"dashed\",\n                drop=FALSE)+\n    stat_bin_2d(geom = \"text\", size=3,colour=\"white\",\n                aes(\n                  label=paste0((100*(round(..count../sum(..count..),2))),\"%\")\n                  \n                ), \n                \n                binwidth = c(0.5, (0.6367725/3)))+\n    \n    geom_segment(aes(x=0,xend=0,y=0,yend=0.66534392-0.028571429),colour=\"white\")+ #drawing a goal\n    geom_segment(aes(x=0-0.028571429,xend=0-0.028571429,y=0,yend=0.66534392),colour=\"white\")+ \n    geom_segment(aes(x=2,xend=2,y=0,yend=0.66534392-0.028571429),colour=\"white\")+\n    geom_segment(aes(x=2+0.028571429,xend=2+0.028571429,y=0,yend=0.66534392 ),colour=\"white\")+\n    geom_segment(aes(x=0,xend=2,y=0.66534392-0.028571429,yend=0.66534392-0.028571429),colour=\"white\")+\n    geom_segment(aes(x=0-0.028571429,xend=2+0.028571429,y=0.66534392,yend=0.66534392),colour=\"white\")+\n    scale_fill_gradient(low = \"#120E41\", high = \"#E172A8\")+ \n    labs(title= glue::glue(\"{name}\")\n         #subtitle = \"Percentage of shots per area\",\n         #caption = \"Data: Opta via FotMob\\n@RobinWilhelmus\"\n         )+\n    theme(plot.background = element_rect(fill = \"#120E41\", colour = \"#120E41\"),\n          panel.background = element_rect(fill = \"#120E41\", colour = \"#120E41\"),\n          legend.position = \"none\",\n          panel.grid = element_blank(),\n          axis.ticks = element_blank(),\n          axis.text = element_blank(),\n          axis.title = element_blank(),\n          strip.background = element_rect(fill=\"#69C5D2\"),\n          strip.text = element_text(family = \"Spartan-Medium\", color= \"#120E41\"),\n          plot.title = element_text(family = \"Spartan-Bold\", colour=\"#69C5D2\",size=8,hjust=.5),\n          plot.subtitle = element_text(family = \"Spartan-Bold\", colour=\"#69C5D2\",size=4),\n          plot.caption = element_text(family = \"Spartan-Light\", colour=\"#69C5D2\",size=3))\n}\nSo in the title of the plot, I put the team name with glue::glue(). You may have to install this package. Of course you can add more stuff to the plot, like the team logo or the number of shots. Go wild! I changed the label in stat_bin_2d as well, as we don’t have to calculate the percentages per panel as there is only one panel every time we plot.\nNow make the plots\nnested_tmp <- shots_df %>% \n  group_by(team_name) %>% \n  nest() %>% \n  arrange(team_name) %>%\n  mutate(plots = map2(data, team_name, plot_func)) \nAnd now use {patchwork} to wrap the plots together. If you’re not familiar with this packages, read the documentation. It is from the same maker as {ggplot} and therefore works great with it.\nlibrary(patchwork) # we use it multiple times in this piece of code\nwrap_plots(nested_tmp$plots)+ #gather all the plots \n  plot_annotation(\n  title = 'Where do the Eredivisie teams shoot on goal?',\n  subtitle = 'Percentage of shots per area',\n  caption = 'Data: Opta via FotMob\\n@RobinWilhelmus'\n) &\n    plot_annotation(theme = \n  theme(plot.background = element_rect(fill=\"#120E41\",colour = \"#120E41\"),\n        plot.title = element_text(family = \"Spartan-Bold\", colour=\"#69C5D2\",size=18),\n        plot.subtitle = element_text(family = \"Spartan-Bold\", colour=\"#69C5D2\",size=14),\n        plot.caption = element_text(family = \"Spartan-Light\", colour=\"#69C5D2\",size=10)))\n\nAnd as you can see, now the area with the most shots per team is highlighted. It took some extra step, but it was worth it.\nMaybe the two different ways to make this plot is a bit redundant, but I learned some stuff making it both ways so just wanted to share.\nIf you have any questions or want to see a tutorial about a viz you saw online, send me a message on Twitter. And tag me if you make one in your own style and post it to Twitter!"
  },
  {
    "objectID": "rank2.html",
    "href": "rank2.html",
    "title": "xRank2",
    "section": "",
    "text": "Find last season here"
  },
  {
    "objectID": "rank2.html#section",
    "href": "rank2.html#section",
    "title": "xRank2",
    "section": "",
    "text": "xRank\n\n\n\n\n\nExpected Points Eredivisie 2022/2023\nLeague table sorted on xPoints\n\n\n\nBased on simulating every shot in every match\n\n\n\n\n\n Download table as xlsx\n\n\n\n\n\n\nShots\n\n\n\n\n\n\n\n\n\n Download table as xlsx\n\n\n\n\n\nPasses\n\n\n\n\n\n\n\n\n\n Download table as xlsx\n\n\n\n\n\n\n\n\n\n\nInfo\n I decided to leave out the shotmaps for better loading and less bugs. You can still find them on Twitter. Every match played is there with the team names so it should be easy to find.\nIt is possible (and very likely) that the xG of players/teams isn’t exactly the sum of the plots on Twitter. The reason for this is that the data is collected a second time for this site and the shot data is changed/improved.\nIf you want to buy me a coffee/beer or help me maintaining the site, you can do so here."
  },
  {
    "objectID": "ShotsKKD.html",
    "href": "ShotsKKD.html",
    "title": "Shooting",
    "section": "",
    "text": "Shots and xG Eerste Divisie 2023/2024\nTable sorted on NP-Goals and NPxG"
  },
  {
    "objectID": "matches.html",
    "href": "matches.html",
    "title": "Matches",
    "section": "",
    "text": "Played Matches Eredivisie 2022/2023\nUnfold a match for more information"
  },
  {
    "objectID": "rank.html",
    "href": "rank.html",
    "title": "xRank",
    "section": "",
    "text": "Expected Points Eredivisie 2023/2024\nLeague table sorted on xPoints\n\n\n\nBased on simulating every shot in every match\nLast update: \n2023-11-04\n\n\n\nDownload file"
  },
  {
    "objectID": "rankKKD.html",
    "href": "rankKKD.html",
    "title": "xRank",
    "section": "",
    "text": "Expected Points Eerste Divisie 2023/2024\nLeague table sorted on xPoints\n\n\n\nBased on simulating every shot in every match\nLast update: \n2023-11-04\n\n\n\nDownload file"
  },
  {
    "objectID": "passes.html",
    "href": "passes.html",
    "title": "Passing",
    "section": "",
    "text": "Assists, xT and xA Eredivisie 2023/2024\nTable sorted on Assists and xA"
  }
]